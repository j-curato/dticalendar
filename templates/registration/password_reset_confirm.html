{% extends 'users/auth_base.html' %}
{% block title %}Set New Password - DTI Caraga{% endblock %}

{% block content %}
<div class="auth-card">

    <div class="auth-brand">
        <h2>DTI Caraga</h2>
        <p>Calendar of Events Portal</p>
    </div>

    <hr class="auth-divider">

    <div class="auth-field" style="text-align:center; margin-bottom: 16px;">
        <strong>Set a New Password</strong>
        <p style="font-size: 0.875rem; color: #6c757d; margin-top: 6px;">
            Enter and confirm your new password below.
        </p>
    </div>

    {% if validlink %}
    <form method="post">
        {% csrf_token %}
        {% for field in form %}
        <div class="auth-field">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            <input type="password" name="{{ field.html_name }}" id="{{ field.id_for_label }}" placeholder="{{ field.label }}" required>
            {% if field.errors %}
            <div style="color: #dc3545; font-size: 0.8rem; margin-top: 4px;">{{ field.errors }}</div>
            {% endif %}
        </div>
        {% endfor %}
        <button type="submit" class="auth-btn">Set New Password</button>
    </form>
    {% else %}
    <div class="alert alert-danger auth-alert">
        This password reset link is invalid or has expired. Please request a new one.
    </div>
    <a href="{% url 'password_reset' %}" class="auth-btn" style="display:block; text-align:center; text-decoration:none;">Request New Link</a>
    {% endif %}

    <div class="auth-footer">
        <a href="{% url 'login' %}">Back to Login</a>
    </div>

</div>
{% endblock %}
